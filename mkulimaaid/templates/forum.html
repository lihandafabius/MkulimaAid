{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="d-flex justify-content-between align-items-center my-4">
        <h2 class="text-success">MkulimaAid Community Q&A Forum</h2>
        <a href="{{ url_for('main.new_question') }}" class="btn btn-success text-white">Ask a Question</a>
    </div>

    <div class="row">
        {% for question in questions %}
        <div class="col-md-12">
            <div class="card mb-3 shadow-sm">
                <div class="card-body d-flex">
                    <!-- User Avatar -->
                    <img class="rounded-circle me-3" src="{{ url_for('static', filename='uploads/' + question.author.avatar) if question.author.avatar else url_for('static', filename='images/default.png') }}" alt="User Avatar" width="50" height="50">
                    <div>
                        <h5><a href="{{ url_for('main.view_question', question_id=question.id) }}" class="text-body">{{ question.title }}</a></h5>
                        <p class="text-muted mb-1">Asked by {{ question.author.username }} on {{ question.timestamp.strftime('%Y-%m-%d %H:%M') }}</p>
                        <p>{{ question.content[:200] }}{% if question.content|length > 200 %}...{% endif %}</p>

                        <!-- View and Answer Button -->
                        <a href="{{ url_for('main.view_question', question_id=question.id) }}" class="btn btn-outline-success btn-sm mt-2">
                            View and Answer
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% else %}
        <p class="text-muted">No questions have been asked yet. Be the first to ask!</p>
        {% endfor %}
    </div>
</div>
{% endblock %}
