<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sign In</title>
    <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
</head>
<body class="bg-body-tertiary sign-in-page login-page">
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
  {% for category, message in messages %}
    <div id="alert-message" class="alert alert-{{ category }}" role="alert" style="display:none;">
      {{ message }}
    </div>
  {% endfor %}
{% endif %}
{% endwith %}

<!-- Theme toggle button -->
<div class="dropdown position-fixed bottom-0 end-0 mb-3 me-3 bd-mode-toggle">
    <button class="btn btn-bd-primary py-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" aria-label="Toggle theme (auto)">
        <svg class="bi my-1 theme-icon-active" width="1em" height="1em">
            <use href="#circle-half"></use>
        </svg>
        <span class="visually-hidden" id="bd-theme-text">Toggle theme</span>
    </button>
    <ul class="dropdown-menu dropdown-menu-end shadow" aria-labelledby="bd-theme-text">
        <li><button type="button" class="dropdown-item" data-bs-theme-value="light">Light</button></li>
        <li><button type="button" class="dropdown-item" data-bs-theme-value="dark">Dark</button></li>
        <li><button type="button" class="dropdown-item active" data-bs-theme-value="auto">Auto</button></li>
    </ul>
</div>

<!-- Sign-in form -->
<main class="form-signin text-center bg-light bg-opacity-50">
    <form action="{{ url_for('main.login') }}" method="POST">
        {{ form.hidden_tag() }}
        <img class="mb-4" src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" width="72" height="72">
        <h1 class="h3 mb-3 fw-normal">Please sign in</h1>

        <div class="form-floating mb-3">
            {{ form.email(class="form-control", placeholder="Email") }}
            <label for="email">Email address</label>
            {% if form.email.errors %}
                <div class="text-danger small">{{ form.email.errors[0] }}</div>
            {% endif %}
        </div>


        <div class="form-floating mb-3 position-relative">
            {{ form.password(class="form-control", id="password", placeholder="Password", type="password") }}
            <label for="password">Password</label>
            <!-- Eye icon for toggling password visibility -->
            <span class="position-absolute  top-50 end-0 translate-middle-y me-3" onclick="togglePasswordVisibility('password')" style="cursor: pointer;">
                <svg id="toggleCurrentPasswordIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16" >
                    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/>
                    <path d="M8 5a3 3 0 0 0-3 3 3 0 0 0 6 0 3 3 0 0 0-3-3z"/>
                </svg>
            </span>
        </div>

        <div class="form-check text-start my-3">
            <input class="form-check-input" type="checkbox" value="remember-me" id="rememberMe">
            <label class="form-check-label" for="rememberMe">Remember me</label>
        </div>

        <button class="btn btn-primary w-100 py-2" type="submit">Sign in</button>
        <p class="mt-5 mb-3 text-body-secondary">Â© 2024</p>
        <p>Don't have an account? <a href="{{ url_for('main.register') }}">Register here</a>.</p>
    </form>
</main>

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<script src="{{ url_for('static', filename='js/theme_toggle.js') }}"></script>
<script src="{{ url_for('static', filename='js/custom.js') }}"></script>

<!-- Toggle Password Visibility Script -->
<script src="{{ url_for('static', filename='js/toggle_password_visibility.js') }}"></script>
<!-- SVG Icons -->
<svg xmlns="http://www.w3.org/2000/svg" class="d-none">
    <symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0v2zm0 14v2zm-4-4H2zm12 0h-2zM2.343 3.343L3.757 1.93zM12.9 12.9l1.414-1.414z"></path></symbol>
    <symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278A7.208 7.208 0 0 0 5.2 4.597a7.277 7.277 0 0 0 7.318 7.277A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71A7.742 7.742 0 0 1 6 .278z"></path></symbol>
    <symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 0v16A8 8 0 1 1 8 0z"></path></symbol>
    <symbol id="eye" viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"/><path d="M8 5a3 3 0 0 0-3 3 3 3 0 0 0 6 0 3 3 0 0 0-3-3z"/></symbol>
    <symbol id="eye-slash" viewBox="0 0 16 16"><path d="M13.359 12.239a8.435 8.435 0 0 0 2.134-4.24A8.7 8.7 0 0 0 8 2.5c-.736 0-1.462.09-2.168.254l1.47 1.47A7.14 7.14 0 0 1 8 3.5a7.7 7.7 0 0 1 7.137 4.69 7.7 7.7 0 0 1-1.74 2.613l1.362 1.362z"/><path d="M11.109 10.498L14 13.39l.72-.72L1.72 1.28.999 2l2.508 2.508C1.996 5.574.777 7.362.777 7.362a8.724 8.724 0 0 0 2.134 4.239l1.575-1.575a7.192 7.192 0 0 1-.867-1.654l1.303-1.302c.038.138.09.273.155.4l1.303 1.303c.108.067.226.122.348.174L8 12.5a7.78 7.78 0 0 1-3.423-1.462l1.226-1.226c1.107.59 2.436.787 3.792.5z"/></symbol>
</svg>
</body>
</html>
