{% extends 'base.html' %}

{% block content %}
<div class="container py-5">
    <h1 class="text-center mb-4 text-success fw-bold">MkulimaAid Help Center</h1>

    <!-- Search Bar -->
    <div class="input-group mb-4">
        <input type="text" class="form-control" id="searchInput" placeholder="Search for help..." onkeyup="filterHelp()">
        <span class="input-group-text"><i class="fas fa-search"></i></span>
    </div>

    <!-- Help Categories -->
    <div class="row" id="helpCategories">
        <div class="col-md-4 mb-4 help-item" data-keywords="getting started introduction" onclick="showHelp('getting-started')">
            <div class="card shadow-sm bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-play-circle"></i> Getting Started</h5>
                    <p class="card-text">Learn how to use MkulimaAid efficiently.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 help-item" data-keywords="account login settings notification" onclick="showHelp('account-management')">
            <div class="card shadow-sm bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-user-cog"></i> Account Management</h5>
                    <p class="card-text">Manage your account settings and preferences.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 help-item" data-keywords="notifications settings preferences" onclick="showHelp('notifications')">
            <div class="card shadow-sm bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-bell"></i> Notification Settings</h5>
                    <p class="card-text">Customize your notification preferences.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 help-item" data-keywords="crop disease detection farming" onclick="showHelp('crop-disease-detection')">
            <div class="card shadow-sm bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-seedling"></i> Crop Disease Detection</h5>
                    <p class="card-text">Identify crop diseases using MkulimaAid.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 help-item" data-keywords="troubleshooting fix issues" onclick="showHelp('troubleshooting')">
            <div class="card shadow-sm bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-tools"></i> Troubleshooting</h5>
                    <p class="card-text">Fix common issues you may encounter.</p>
                </div>
            </div>
        </div>

        <div class="col-md-4 mb-4 help-item" data-keywords="support contact assistance" onclick="showHelp('contact-support')">
            <div class="card shadow-sm bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title"><i class="fas fa-headset"></i> Contact Support</h5>
                    <p class="card-text">Reach out to our support team for assistance.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Content Sections -->
    <div id="helpContent" class="mt-5">
        <div id="getting-started" class="help-section d-none">
            <h3>Getting Started</h3>
            <p>Welcome to MkulimaAid! Here's how to get started:</p>
            <ul class="list-unstyled">
                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('create-account')">
                        How to create an account
                    </button>
                    <div id="create-account" class="help-detail d-none">
                        <p>To create an account:</p>
                        <ol>
                            <li>Go to the MkulimaAid homepage.</li>
                            <li>Click on "Sign Up".</li>
                            <li>Fill in your details and submit.</li>
                            <li>Verify your email to activate your account.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('navigate-dashboard')">
                        Navigating the dashboard
                    </button>
                    <div id="navigate-dashboard" class="help-detail d-none">
                        <p>The dashboard provides access to key features like:</p>
                        <ul>
                            <li>Crop disease detection</li>
                            <li>Community Q&A</li>
                            <li>Notifications and settings</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('basic-functionalities')">
                        Basic site functionalities
                    </button>
                    <div id="basic-functionalities" class="help-detail d-none">
                        <p>MkulimaAid helps farmers with:</p>
                        <ul>
                            <li>Identifying crop diseases using AI.</li>
                            <li>Connecting with other farmers in the Q&A forum.</li>
                            <li>Receiving notifications about trending crop diseases.</li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>


        <div id="account-management" class="help-section d-none">
            <h3>Account Management</h3>
            <p>Manage your account settings, update your profile, and reset passwords.</p>
            <ul class="list-unstyled">
                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('update-info')">
                        Updating personal information
                    </button>
                    <div id="update-info" class="help-detail d-none">
                        <p>To update your personal information:</p>
                        <ol>
                            <li>Go to your profile settings.</li>
                            <li>Edit your name, email, or other details.</li>
                            <li>Click "Save Changes" to update your information.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('change-password')">
                        Changing your password
                    </button>
                    <div id="change-password" class="help-detail d-none">
                        <p>To change your password:</p>
                        <ol>
                            <li>Go to "Account Settings".</li>
                            <li>Enter your current password.</li>
                            <li>Set a new password and confirm it.</li>
                            <li>Click "Update Password" to save changes.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('delete-account')">
                        Deleting or deactivating your account
                    </button>
                    <div id="delete-account" class="help-detail d-none">
                        <p>To delete or deactivate your account:</p>
                        <ul>
                            <li>Visit "Account Preferences" in settings.</li>
                            <li>Select "Deactivate" to temporarily disable or "Delete" for permanent removal.</li>
                            <li>Confirm your choice.</li>
                            <li>Once deleted, the account cannot be recovered.</li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>

        <div id="notifications" class="help-section d-none">
            <h3>Notification Settings</h3>
            <p>Learn how to customize your notification preferences.</p>
            <ul class="list-unstyled">
                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('email-notifications')">
                        Enabling/disabling email notifications
                    </button>
                    <div id="email-notifications" class="help-detail d-none">
                        <p>To manage your email notifications:</p>
                        <ol>
                            <li>Go to "Account Settings".</li>
                            <li>Navigate to the "Notifications" section.</li>
                            <li>Toggle email notifications on or off.</li>
                            <li>Click "Save Changes" to apply your preferences.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('push-notifications')">
                        Configuring push notifications
                    </button>
                    <div id="push-notifications" class="help-detail d-none">
                        <p>To configure push notifications:</p>
                        <ol>
                            <li>Ensure push notifications are enabled on your device.</li>
                            <li>Go to "Notifications" under "Account Settings".</li>
                            <li>Enable or disable push notifications as preferred.</li>
                            <li>Save your settings to confirm changes.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('notification-preferences')">
                        Setting notification preferences
                    </button>
                    <div id="notification-preferences" class="help-detail d-none">
                        <p>To customize your notification preferences:</p>
                        <ol>
                            <li>Go to "Account Settings" > "Notifications".</li>
                            <li>Select the types of alerts you want to receive (e.g., crop disease updates, community messages).</li>
                            <li>Adjust frequency settings if applicable.</li>
                            <li>Click "Save Changes" to update your preferences.</li>
                        </ol>
                    </div>
                </li>
            </ul>
        </div>

        <div id="crop-disease-detection" class="help-section d-none">
            <h3>Crop Disease Detection</h3>
            <p>Identify and manage crop diseases with our AI-powered detection system.</p>
            <ul class="list-unstyled">
                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('upload-images')">
                        Uploading images for analysis
                    </button>
                    <div id="upload-images" class="help-detail d-none">
                        <p>To upload an image for disease detection:</p>
                        <ol>
                            <li>Go to the "Crop Disease Detection" section on your dashboard.</li>
                            <li>Click on the "Upload Image" button.</li>
                            <li>Select a clear image of the affected crop.</li>
                            <li>Click "Analyze" to get results.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('disease-reports')">
                        Understanding disease reports
                    </button>
                    <div id="disease-reports" class="help-detail d-none">
                        <p>When you receive a disease report:</p>
                        <ol>
                            <li>The system will display the detected disease name.</li>
                            <li>You will see confidence scores indicating prediction accuracy.</li>
                            <li>Recommended treatment methods will be provided.</li>
                            <li>For more details, visit the "Trending Diseases" section.</li>
                        </ol>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('accurate-results')">
                        Best practices for accurate results
                    </button>
                    <div id="accurate-results" class="help-detail d-none">
                        <p>To improve detection accuracy:</p>
                        <ul>
                            <li>Use a high-quality image with good lighting.</li>
                            <li>Ensure the affected part of the plant is clearly visible.</li>
                            <li>Avoid blurry or zoomed-out images.</li>
                            <li>Take multiple images from different angles if necessary.</li>
                        </ul>
                    </div>
                </li>
            </ul>
        </div>


        <div id="troubleshooting" class="help-section d-none">
            <h3>Troubleshooting</h3>
            <p>Find solutions to common problems and errors.</p>
            <ul class="list-unstyled">

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('login-issues')">
                        Login issues
                    </button>
                    <div id="login-issues" class="help-detail d-none">
                        <p>If you're having trouble logging in:</p>
                        <ul>
                            <li>Ensure your username and password are correct.</li>
                            <li>Check if Caps Lock is on (passwords are case-sensitive).</li>
                            <li>Try resetting your password using the "Forgot Password" option.</li>
                            <li>Clear your browser cache and try again.</li>
                            <li>If the issue persists, contact support.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('site-not-loading')">
                        Site not loading properly
                    </button>
                    <div id="site-not-loading" class="help-detail d-none">
                        <p>If the site isn't loading correctly:</p>
                        <ul>
                            <li>Check your internet connection.</li>
                            <li>Try refreshing the page or opening it in a different browser.</li>
                            <li>Clear your browser's cache and cookies.</li>
                            <li>Disable browser extensions that may interfere with the site.</li>
                            <li>If the issue continues, report it to support.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('error-messages')">
                        Error messages and how to fix them
                    </button>
                    <div id="error-messages" class="help-detail d-none">
                        <p>Common error messages and their solutions:</p>
                        <ul>
                            <li><strong>"Invalid credentials":</strong> Double-check your login details and try again.</li>
                            <li><strong>"Session expired":</strong> Log in again to refresh your session.</li>
                            <li><strong>"File upload failed":</strong> Ensure your file meets the size and format requirements.</li>
                            <li><strong>"Access denied":</strong> Check if you have the necessary permissions for the action.</li>
                            <li>If you encounter an unknown error, please contact support.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('image-upload-issues')">
                        Image upload issues
                    </button>
                    <div id="image-upload-issues" class="help-detail d-none">
                        <p>If you're having trouble uploading an image:</p>
                        <ul>
                            <li>Ensure the file is in an accepted format (JPG, PNG, JPEG).</li>
                            <li>Check that the file size does not exceed the maximum limit.</li>
                            <li>Make sure your internet connection is stable.</li>
                            <li>Try uploading from a different browser or device.</li>
                            <li>If the issue persists, contact support.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('slow-performance')">
                        Slow site performance
                    </button>
                    <div id="slow-performance" class="help-detail d-none">
                        <p>If the site is running slow:</p>
                        <ul>
                            <li>Check your internet speed and connection stability.</li>
                            <li>Try closing unnecessary browser tabs.</li>
                            <li>Clear your browser’s cache and cookies.</li>
                            <li>Disable heavy browser extensions that may slow down performance.</li>
                            <li>Try accessing the site on a different device or network.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('email-not-received')">
                        Not receiving emails (verification, reset password, notifications)
                    </button>
                    <div id="email-not-received" class="help-detail d-none">
                        <p>If you're not receiving important emails:</p>
                        <ul>
                            <li>Check your spam or junk folder.</li>
                            <li>Ensure you've entered the correct email address.</li>
                            <li>Wait a few minutes, as email delivery may be delayed.</li>
                            <li>Try resending the email if an option is available.</li>
                            <li>Ensure your mailbox isn't full or blocking MkulimaAid emails.</li>
                            <li>If the issue persists, contact support.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('notification-issues')">
                        Notifications not appearing
                    </button>
                    <div id="notification-issues" class="help-detail d-none">
                        <p>If you're not receiving notifications:</p>
                        <ul>
                            <li>Ensure notifications are enabled in your account settings.</li>
                            <li>Check if your browser or device has blocked notifications.</li>
                            <li>Log out and log back in to refresh your session.</li>
                            <li>Ensure your email notifications are enabled if using email alerts.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('account-locked')">
                        Account locked or suspended
                    </button>
                    <div id="account-locked" class="help-detail d-none">
                        <p>If your account is locked or suspended:</p>
                        <ul>
                            <li>Check your email for a suspension or warning notice.</li>
                            <li>If locked due to multiple failed login attempts, wait a few minutes and try again.</li>
                            <li>Reset your password if you believe unauthorized access was attempted.</li>
                            <li>Contact support to request account reactivation.</li>
                        </ul>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('data-not-updating')">
                        Changes not saving or data not updating
                    </button>
                    <div id="data-not-updating" class="help-detail d-none">
                        <p>If updates to your profile or settings aren’t saving:</p>
                        <ul>
                            <li>Ensure all required fields are filled in correctly.</li>
                            <li>Check if there's an error message preventing the update.</li>
                            <li>Try logging out and logging back in to refresh your session.</li>
                            <li>Clear your browser’s cache and try again.</li>
                            <li>If the issue persists, contact support.</li>
                        </ul>
                    </div>
                </li>

            </ul>
        </div>



        <div id="contact-support" class="help-section d-none">
            <h3>Contact Support</h3>
            <p>Need help? Reach out to our support team through the following channels:</p>

            <ul class="list-unstyled">

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('email-support')">
                        📧 Email Support
                    </button>
                    <div id="email-support" class="help-detail d-none">
                        <p>For general inquiries, technical issues, or account-related problems, email us at:</p>
                        <ul>
                            <li><strong>General Support:</strong> <a href="mailto:support@mkulimaaid.com">support@mkulimaaid.com</a></li>
                            <li><strong>Technical Assistance:</strong> <a href="mailto:techsupport@mkulimaaid.com">techsupport@mkulimaaid.com</a></li>
                            <li><strong>Billing & Payments:</strong> <a href="mailto:billing@mkulimaaid.com">billing@mkulimaaid.com</a></li>
                        </ul>
                        <p>We usually respond within <strong>24-48 hours</strong>. Check your spam folder if you don’t receive a reply.</p>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('phone-support')">
                        📞 Phone Support
                    </button>
                    <div id="phone-support" class="help-detail d-none">
                        <p>Speak directly with a support agent:</p>
                        <ul>
                            <li><strong>Customer Support:</strong> +123 456 7890</li>
                            <li><strong>Technical Assistance:</strong> +123 987 6543</li>
                        </ul>
                        <p><strong>Availability:</strong> Monday - Friday | 9:00 AM - 5:00 PM (UTC)</p>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('live-chat')">
                        💬 Live Chat Support
                    </button>
                    <div id="live-chat" class="help-detail d-none">
                        <p>Chat with a support representative in real time.</p>
                        <ul>
                            <li><strong>Available:</strong> Monday - Friday</li>
                            <li><strong>Hours:</strong> 8:00 AM - 6:00 PM (UTC)</li>
                            <li><strong>Response Time:</strong> Typically within 5 minutes</li>
                        </ul>
                        <p><a href="#">Start Live Chat</a></p>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('faq-help')">
                        📖 Check Our FAQs
                    </button>
                    <div id="faq-help" class="help-detail d-none">
                        <p>Find quick answers to common questions in our <a href="/faqs">FAQ section</a>.</p>
                        <p>Before reaching out, check if your question is already answered.</p>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('social-support')">
                        📱 Social Media Support
                    </button>
                    <div id="social-support" class="help-detail d-none">
                        <p>Connect with us on social media for updates and quick assistance:</p>
                        <ul>
                            <li><a href="#">Facebook</a></li>
                            <li><a href="#">Twitter</a></li>
                            <li><a href="#">Instagram</a></li>
                        </ul>
                        <p>Send us a direct message, and we'll get back to you as soon as possible.</p>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('community-support')">
                        👥 Community Support Forum
                    </button>
                    <div id="community-support" class="help-detail d-none">
                        <p>Join the <a href="/forum">MkulimaAid Community Forum</a> to ask questions and get help from fellow farmers and experts.</p>
                        <p>Many common issues are solved through shared experiences.</p>
                    </div>
                </li>

                <li>
                    <button class="btn btn-link text-success fw-bold" onclick="toggleHelp('ticket-support')">
                        🎫 Submit a Support Ticket
                    </button>
                    <div id="ticket-support" class="help-detail d-none">
                        <p>If your issue requires detailed troubleshooting, submit a support ticket.</p>
                        <p><a href="#">Submit a Ticket</a></p>
                        <p>Our team will review your request and respond as soon as possible.</p>
                    </div>
                </li>

            </ul>
        </div>

    </div>
    <div class="text-center mt-4">
        <a href="{{ url_for('main.upload') }}"
           class="btn btn-outline-success fw-bold">
           <i class="fas fa-arrow-left"></i> Back to Homepage <i class="fas fa-home"></i>
        </a>
    </div>
</div>

<script>
    function filterHelp() {
        let input = document.getElementById('searchInput').value.toLowerCase();
        let items = document.querySelectorAll('.help-item');

        items.forEach(item => {
            let keywords = item.getAttribute('data-keywords');
            if (keywords.includes(input)) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    }

    function showHelp(sectionId) {
        document.querySelectorAll('.help-section').forEach(section => {
            section.classList.add('d-none');
        });
        document.getElementById(sectionId).classList.remove('d-none');
    }

    function toggleHelp(sectionId) {
        let content = document.getElementById(sectionId);
        content.classList.toggle('d-none');
    }

</script>
{% endblock %}
